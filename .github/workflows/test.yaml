name: Job Summary

on:
  push:
  workflow_dispatch:

jobs:
  generate-job-summary:
    name: Generate Job Summary
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Generate Job Summary
      id: job-summary-1
      uses: ./
      with:
        template: .github/templates/job-summary.md.jinja
        variables: |-
          {
            "jobs": 1,
            "steps": ["a", "b", "c"]
          }

    - name: Generate Job Summary
      id: job-summary-2
      uses: ./
      with:
        template: .github/workflows/test/job-summary.md.jinja
        variables: .github/workflows/test/variables.yaml
        variables-format: yaml-file

    - name: Save Job Summary
      run: |
        tee -a $GITHUB_STEP_SUMMARY <<< $'${{ steps.job-summary-1.outputs.output }}'
        tee -a $GITHUB_STEP_SUMMARY <<< $'${{ steps.job-summary-2.outputs.output }}'